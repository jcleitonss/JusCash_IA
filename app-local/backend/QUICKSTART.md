# ‚ö° Quick Start - JUSCRASH Backend

Guia r√°pido para rodar a API localmente.

---

## üöÄ Passo a Passo

### **1. Instalar depend√™ncias**

```bash
cd app-local/backend
pip install -r requirements.txt
```

---

### **2. Testar conex√£o com Bedrock**

```bash
python test_connection.py
```

**Sa√≠da esperada:**
```
==================================================
üß™ TESTE DE CONEX√ÉO - JUSCRASH API
==================================================

üîß Testando configura√ß√µes...
‚úÖ API Key carregada: ABSKQmVkcm9ja0FQSUt...
‚úÖ Regi√£o: us-east-1
‚úÖ Modelo: anthropic.claude-3-sonnet-20240229-v1:0

ü§ñ Testando conex√£o com Bedrock...
‚úÖ Resposta do Bedrock: OK

==================================================
‚úÖ Testes conclu√≠dos!
==================================================
```

---

### **3. Rodar a API**

```bash
uvicorn app.main:app --reload --port 8000
```

**Sa√≠da esperada:**
```
üöÄ Iniciando JUSCRASH API...
INFO:     Uvicorn running on http://127.0.0.1:8000
INFO:     Application startup complete.
```

---

### **4. Testar endpoints**

#### **Health check:**
```bash
curl http://localhost:8000/health
```

**Resposta:**
```json
{
  "status": "ok",
  "service": "juscrash-api",
  "version": "1.0.0"
}
```

#### **Documenta√ß√£o interativa:**
- Swagger UI: http://localhost:8000/docs
- ReDoc: http://localhost:8000/redoc

---

## üß™ Testar an√°lise de processo

### **Criar arquivo de teste:**

```bash
# Criar pasta data
mkdir ../../data

# Criar processo_teste.json
```

```json
{
  "numeroProcesso": "0001234-56.2023.4.05.8100",
  "classe": "Cumprimento de Senten√ßa",
  "orgaoJulgador": "19¬™ VARA FEDERAL",
  "ultimaDistribuicao": "2024-11-18T23:15:44.130Z",
  "assunto": "Rural",
  "segredoJustica": false,
  "justicaGratuita": true,
  "siglaTribunal": "TRF5",
  "esfera": "Federal",
  "documentos": [
    {
      "id": "DOC-1",
      "dataHoraJuntada": "2023-09-10T10:12:05.000Z",
      "nome": "Certid√£o de Tr√¢nsito em Julgado",
      "texto": "Certifico que a senten√ßa transitou em julgado."
    }
  ],
  "movimentos": [
    {
      "dataHora": "2024-01-20T11:22:33.000Z",
      "descricao": "Iniciado cumprimento definitivo de senten√ßa."
    }
  ]
}
```

### **Enviar request:**

```bash
curl -X POST http://localhost:8000/api/v1/verificar \
  -H "Content-Type: application/json" \
  -d @../../data/processo_teste.json
```

**Resposta esperada:**
```json
{
  "decision": "approved",
  "rationale": "Processo transitado em julgado e em fase de execu√ß√£o...",
  "citacoes": ["POL-1", "POL-2"]
}
```

---

## üêõ Troubleshooting

### **Erro: Module not found**
```bash
pip install -r requirements.txt
```

### **Erro: Bedrock access denied**
- Verifique se a chave est√° correta em `app-local/keys/bedrock-long-term-api-key.csv`
- Confirme que o modelo Claude 3 est√° habilitado na sua conta AWS

### **Erro: Import error config**
- Verifique se o arquivo `app-local/keys/config.py` existe
- Confirme que o CSV da chave est√° na pasta `keys/`

---

## üìö Pr√≥ximos passos

1. ‚úÖ API rodando localmente
2. ‚è≠Ô∏è Testar com os 11 processos exemplo
3. ‚è≠Ô∏è Integrar com frontend React
4. ‚è≠Ô∏è Adicionar LangFuse (observabilidade)
5. ‚è≠Ô∏è Deploy com Docker

---

## üÜò Precisa de ajuda?

- Documenta√ß√£o: http://localhost:8000/docs
- README completo: [README.md](README.md)
